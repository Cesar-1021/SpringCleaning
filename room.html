<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <script>
        let backgroundImage;
        let duster;
        let sodaPile;
        let laundryPile;
        let dust = [];
        let num = 4;

        // Preload all images
        function preload() {
            backgroundImage = loadImage('sprites/room/room.png');
            duster = loadImage('sprites/room/dusterIRL.png');
            sodaPile = loadImage('sprites/room/sodaPile.png');
            laundryPile = loadImage('sprites/room/laundryPile.png');
            for (let i = 0; i < num; i++) {
                dust.push(loadImage('sprites/room/dust.png'));
            }
        }

        function setup() {
            canvas = createCanvas(backgroundImage.width, backgroundImage.height);
            let canvasX = (windowWidth - backgroundImage.width) / 2;
            let canvasY = (windowHeight - backgroundImage.height) / 2;
            canvas.position(canvasX, canvasY);

            mouseX = windowWidth / 2;
            mouseY = windowHeight / 2;
        }

        function windowResized() {
            let canvasX = (windowWidth - backgroundImage.width) / 2;
            let canvasY = (windowHeight - backgroundImage.height) / 2;
            canvas.position(canvasX, canvasY);
        }

        function draw() {
            background(backgroundImage); // set the background every frame

            // Rotate and draw the duster
            push(); // Start a new drawing state
            translate(canvas.width / 2 + 680, canvas.height / 2 + 180); // Move the origin to the desired location of the duster
            rotate(PI * 1.1); // Rotate by PI/8 radians (about 22.5 degrees)
            image(duster, -duster.width / 8, -duster.height / 8, duster.width / 4, duster.height / 4); // Draw the image centered on the new origin
            pop(); // Restore original state

            image(sodaPile, canvas.width / 2 + 340, canvas.height / 2 + 120, sodaPile.width / 2.8, sodaPile.height / 2.8);
            image(laundryPile, canvas.width / 2 - 400, canvas.height / 2 - 80, laundryPile.width / 2, laundryPile.height / 2);
            for (let i = 0; i < num; i++) {
                image(dust[i], 0, 180 + 138 * i, 220, 125);
            }


        }

        function mouseClicked() {
            if (mouseX >= 0 && mouseX <= 220 &&
                mouseY >= (180) && mouseY <= 180 + 138 * 3 + 125 / 2) {
                window.location.href = 'dust.html';
                return;
            }

        }

    </script>
</body>

</html>