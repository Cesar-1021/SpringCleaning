<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duster</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }

        #askNice {
            display: block;
            position: fixed;
            top: 84%;
            left: 50%;
            transform: translate(-50%);
            padding: 2vmin;
            font-size: 3vmin;
            color: white;
            background-color: black;
            border: none;
            border-radius: 3vmin;
            cursor: pointer;
            z-index: 1000;
        }

        #askNice:hover {
            background-color: pink;
        }

        #askMean {
            display: block;
            position: fixed;
            top: 92%;
            left: 50%;
            transform: translate(-50%);
            padding: 2vmin;
            font-size: 3vmin;
            color: white;
            background-color: black;
            border: none;
            border-radius: 3vmin;
            cursor: pointer;
            z-index: 1000;
        }

        #askMean:hover {
            background-color: pink;
        }
    </style>
</head>

<body>
    <button id="askNice">Would you please help me dust my shelf?</button>
    <button id="askMean">Congrats! You get to help me!</button>

    <script>
        let bedside;
        let duster;
        let convo = 0;

        // Preload all images
        function preload() {
            bedside = loadImage('sprites/characters/dusterBackground.png');
            duster = loadImage('sprites/characters/duster.png');
        }

        function setup() {
            scale = Math.min(windowWidth / bedside.width, windowHeight / bedside.height);

            let canvasX = (windowWidth / 2) - (bedside.width / 2) * scale;
            let canvasY = (windowHeight / 2) - (bedside.height / 2) * scale;
            width = bedside.width * scale;
            height = bedside.height * scale;

            canvas = createCanvas(width, height);
            canvas.position(canvasX, canvasY);
        }

        function windowResized() {
            scale = Math.min(windowWidth / bedside.width, windowHeight / bedside.height);
            let canvasX = (windowWidth / 2) - (bedside.width / 2) * scale;
            let canvasY = (windowHeight / 2) - (bedside.height / 2) * scale;
            width = bedside.width * scale;
            height = bedside.height * scale;

            resizeCanvas(width, height);
            canvas.position(canvasX, canvasY);
        }

        function styledText(string, x, y) {
            sizeOfText = 18 * scale;
            textSize(sizeOfText);
            textStyle(BOLD);
            textAlign(CENTER);
            textFont('Papyrus');
            fill(0);
            text(string, x + 1.5 * scale, y);
            text(string, x - 1.5 * scale, y);
            fill(255);
            text(string, x, y);
        }

        function draw() {
            clear();
            background(bedside); // set the background every frame
            image(duster, width / 2 - duster.width / 8 * scale, height - duster.height / 3 * scale, duster.width / 4 * scale, duster.height / 4 * scale);

            switch (convo) {
                case 0:
                    styledText("Can I help you?", width / 2, height / 1.2);
                    break;
                case 1:
                    styledText("Sure, why not?", width / 2, height / 1.2);
                    break;
                case 2:
                    styledText("... No", width / 2, height / 1.2);
                    break;
                default:
            }

        }

        // Update clickable areas or interactions based on scale
        function mouseClicked() {
            // Check for click on the dust piles
            let dustWidth = 220 * scaleFactor;
            let dustHeight = 125 * scaleFactor;
            let dustStartY = 180 * scaleFactor;
            let dustSpacing = 138 * scaleFactor;

            for (let i = 0; i < num; i++) {
                let pileY = dustStartY + i * dustSpacing;
                if (mouseX >= 0 && mouseX <= dustWidth && mouseY >= pileY && mouseY <= pileY + dustHeight) {
                    window.location.href = 'dust.html';
                    return;
                }
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            var returnButton = document.getElementById('askNice');
            returnButton.addEventListener('click', function () {

            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            var returnButton = document.getElementById('askMean');
            returnButton.addEventListener('click', function () {

            });
        });

    </script>
</body>

</html>