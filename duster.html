<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duster</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }

        #askNice {
            display: block;
            position: fixed;
            top: 84%;
            left: 50%;
            transform: translate(-50%);
            padding: 2vmin;
            font-size: 3vmin;
            color: white;
            background-color: black;
            border: none;
            border-radius: 3vmin;
            cursor: pointer;
            z-index: 1000;
        }

        #askNice:hover {
            background-color: pink;
        }

        #askMean {
            display: block;
            position: fixed;
            top: 92%;
            left: 50%;
            transform: translate(-50%);
            padding: 2vmin;
            font-size: 3vmin;
            color: white;
            background-color: black;
            border: none;
            border-radius: 3vmin;
            cursor: pointer;
            z-index: 1000;
        }

        #askMean:hover {
            background-color: pink;
        }

        #return {
            display: none;
            position: fixed;
            top: 88%;
            left: 50%;
            transform: translate(-50%);
            padding: 2vmin;
            font-size: 3vmin;
            color: white;
            background-color: black;
            border: none;
            border-radius: 3vmin;
            cursor: pointer;
            z-index: 1000;
        }

        #return:hover {
            background-color: pink;
        }
    </style>
</head>

<body>
    <button id="askNice">My mom wants me to clean my room. Can you help me?</button>
    <button id="askMean">CLEAN FOR ME!</button>
    <button id="return">Return to Room</button>

    <script>
        let bedside;
        let duster;
        let convo = 0;

        // Preload all images
        function preload() {
            bedside = loadImage('sprites/characters/dusterBackground.png');
            duster = loadImage('sprites/characters/duster.png');
        }

        function setup() {
            scale = Math.min(windowWidth / bedside.width, windowHeight / bedside.height);

            let canvasX = (windowWidth / 2) - (bedside.width / 2) * scale;
            let canvasY = (windowHeight / 2) - (bedside.height / 2) * scale;
            width = bedside.width * scale;
            height = bedside.height * scale;

            canvas = createCanvas(width, height);
            canvas.position(canvasX, canvasY);
        }

        function windowResized() {
            scale = Math.min(windowWidth / bedside.width, windowHeight / bedside.height);
            let canvasX = (windowWidth / 2) - (bedside.width / 2) * scale;
            let canvasY = (windowHeight / 2) - (bedside.height / 2) * scale;
            width = bedside.width * scale;
            height = bedside.height * scale;

            resizeCanvas(width, height);
            canvas.position(canvasX, canvasY);
        }

        function styledText(string, x, y) {
            sizeOfText = 18 * scale;
            textSize(sizeOfText);
            textStyle(BOLD);
            textAlign(CENTER);
            textFont('Papyrus');
            fill(0);
            text(string, x + 1.5 * scale, y);
            text(string, x - 1.5 * scale, y);
            fill(255);
            text(string, x, y);
        }

        function draw() {
            clear();
            background(bedside); // set the background every frame
            image(duster, width / 2 - duster.width / 8 * scale, height - duster.height / 3 * scale, duster.width / 4 * scale, duster.height / 4 * scale);

            switch (convo) {
                case 0:
                    styledText("Can I help you?", width / 2, height / 1.2);
                    break;
                case 1:
                    styledText("Sure, why not?", width / 2, height / 1.2);
                    break;
                case 2:
                    styledText("No thanks", width / 2, height / 1.2);
                    break;
                default:
            }

        }


        document.addEventListener("DOMContentLoaded", function () {
            var returnButton = document.getElementById('askNice');
            returnButton.addEventListener('click', function () {
                convo = 1;
                document.getElementById("askNice").style.display = "none";
                document.getElementById("askMean").style.display = "none";
                document.getElementById("return").style.display = "block";
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            var returnButton = document.getElementById('askMean');
            returnButton.addEventListener('click', function () {
                convo = 2;
                document.getElementById("askNice").style.display = "none";
                document.getElementById("askMean").style.display = "none";
                document.getElementById("return").style.display = "block";
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            var returnButton = document.getElementById('return');
            returnButton.addEventListener('click', function () {
                window.location.href = 'room.html';
            });
        });

    </script>
</body>

</html>